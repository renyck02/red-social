!function(){if(document.querySelector("#mensajes")){document.querySelector("#enviarmensaje").addEventListener("click",()=>{document.querySelector("#mensaje").value})}}(),function(){const t=document.getElementById("lupa");if(t){const a=document.getElementById("busqueda"),n=document.getElementById("busqueda__input");function e(t){const{usuarioAmigoId:e,usuarioId:a,estado:n}=t;let o=document.querySelector(`[data-id="${e}"]`);o||(o=document.querySelector(`[data-id="${a}"]`)),0==n&&(o.textContent="Pendiente",o.disabled=!0),1==n&&(o.textContent="Agregado",o.disabled=!0)}t.onclick=function(){const t=document.querySelector(".mostrar");if(t)return a.classList.add("mostrar"),void t.classList.remove("mostrar");a.classList.add("mostrar")},n.addEventListener("input",(function(){let t=this.value;t.length>3&&async function(t){const a=new FormData;a.append("busqueda",t);try{const t="http://localhost:3000/api/busquedausuarios",n=await fetch(t,{method:"POST",body:a}),o=await n.json();o&&function(t){const a=document.getElementById("busqueda__resultados");a.innerHTML="",t.forEach(t=>{const n=document.createElement("DIV");n.classList.add("busqueda-resultado");const o=document.createElement("DIV");o.classList.add("busqueda-resultado__imagen"),n.appendChild(o);const c=document.createElement("P");c.classList.add("busqueda-resultado__nickname"),c.textContent=t.nickname,n.appendChild(c);const s=document.createElement("BUTTON");s.classList.add("busqueda-resultado__agregar"),s.textContent="Agregar",s.dataset.id=t.id,async function(t){const a=new FormData;a.append("amigoId",t);try{const t="http://localhost:3000/api/estadorelacion",n=await fetch(t,{method:"POST",body:a}),o=await n.json();o&&(console.log(o),e(o))}catch(t){}}(t.id),s.addEventListener("click",()=>{!async function(t){const a=new FormData;a.append("amigoId",t);try{const t="http://localhost:3000/api/agregaamigo",n=await fetch(t,{method:"POST",body:a}),o=await n.json();o&&e(o)}catch(t){}}(t.id)}),n.appendChild(s),a.appendChild(n)})}(o)}catch(t){}}(t)}))}}(),function(){const t=document.getElementById("campana");if(t){const e=document.getElementById("notificaciones");t.onclick=function(){const t=document.querySelector(".mostrar");if(t)return e.classList.add("mostrar"),void t.classList.remove("mostrar");e.classList.add("mostrar"),async function(){try{const t="http://localhost:3000/api/notificaciones",a=await fetch(t,{method:"POST"}),n=await a.json();n&&(console.log(n),function(t){if(console.log(t),e.innerHTML="",0==t.length){const t=document.createElement("P");t.textContent="No Tienes Solicitudes de amistad",t.classList.add("notificacion__vacio"),e.append(t)}t.forEach(t=>{const a=document.createElement("DIV");a.classList.add("notificacion");const n=document.createElement("DIV");n.classList.add("notificacion__imagen"),a.appendChild(n);const o=document.createElement("P");o.classList.add("notificacion__nickname"),o.textContent=t.nickname,o.dataset.usuario_id=t.usuario_id,a.appendChild(o);const c=document.createElement("BUTTON");c.classList.add("notificacion__agregar"),c.textContent="Agregar",c.dataset.id=t.id,c.addEventListener("click",()=>{!async function(t){const e=document.querySelector(`[data-id="${t}"]`);try{const a="http://localhost:3000/api/agregar",n=new FormData;n.append("id",t);const o=await fetch(a,{method:"POST",body:n}),c=await o.json();c&&(console.log(c),e.textContent="Agregado")}catch(t){}}(t.id)}),a.appendChild(c),e.appendChild(a)})}(n))}catch(t){}}()}}}(),function(){const t=document.querySelector("#publicar");if(t){const e=document.querySelector("#publicacion");t.onclick=()=>{const t=document.querySelector(".mostrar");if(t)return e.classList.add("mostrar"),void t.classList.remove("mostrar");e.classList.add("mostrar")};const a=document.getElementById("publicacion__imagen"),n=document.getElementById("publicacion__texto");document.getElementById("publicacion__boton").onclick=async function(){const t=a.files[0];console.log(t),datos=new FormData,datos.append("mensaje",n.value),datos.append("imagen",t);try{const t="http://localhost:3000/api/publicar",e=await fetch(t,{method:"POST",body:datos}),a=await e.json();a&&console.log(a)}catch(t){}}}}(),function(){const t=document.querySelector(".amigos");if(t){document.addEventListener("DOMContentLoaded",()=>{!async function(){try{const e="http://localhost:3000/api/busquedaAmigos",a=await fetch(e,{method:"POST"}),n=await a.json();if(n){console.log(n);const e=n[0],a=n[1];!function(e){if(!e)return;e.forEach(e=>{const a=document.createElement("DIV");a.classList.add("amigo"),a.onclick=()=>{const t=new URL(window.location);t.searchParams.set("idamigo",e.usuarioAmigoId),window.history.pushState({},"",t),t.href.includes("chats")||(window.location.href="http://localhost:3000/dashboard/chats?idamigo="+e.usuarioAmigoId)},a.dataset.idAmigo=e.usuarioAmigoId;const n=document.createElement("DIV");n.classList.add("amigo__imagen");const o=document.createElement("P");o.classList.add("amigo__nombre"),o.dataset.id=e.usuarioAmigoId,a.appendChild(n),a.appendChild(o),t.appendChild(a),async function(t){const e=new FormData;e.append("id",t);try{const a="http://localhost:3000/api/busquedaNombreUsuario",n=await fetch(a,{method:"POST",body:e}),o=await n.json();if(o){document.querySelector(`[data-id="${t}"]`).textContent=o.nickname}}catch(t){}}(e.usuarioAmigoId)})}(e.map(t=>(t.usuarioId!=a&&(t.usuarioAmigoId=t.usuarioId),t)))}}catch(t){}}()})}}(),function(){const t=document.getElementById("publicaciones");if(t){document.addEventListener("DOMContentLoaded",(function(){!async function(){datos=new FormData;try{const e="http://localhost:3000/api/busquedapublicaciones",a=await fetch(e,{method:"POST",body:datos}),n=await a.json();n&&(console.log(n),n.forEach(e=>{const a=document.createElement("DIV");a.classList.add("post");const n=document.createElement("DIV");n.classList.add("post__perfil");const o=document.createElement("DIV");o.classList.add("post__imagen-perfil"),n.appendChild(o);const c=document.createElement("P");c.textContent=e.nickname,c.classList.add("post__nickname"),n.appendChild(c),a.appendChild(n);const s=document.createElement("P");if(s.textContent=e.mensaje,s.classList.add("post__texto"),a.appendChild(s),e.imagen){const t=document.createElement("IMG");t.setAttribute("src","/imagenes-publicaciones/"+e.imagen),t.classList.add("post__imagen"),a.appendChild(t)}t.appendChild(a)}))}catch(t){}}()}))}}();
//# sourceMappingURL=bundle.js.map
