{"version":3,"sources":["modalAmigos.js"],"names":["lupa","document","getElementById","modal","input","onclick","classList","toggle","addEventListener","busqueda","this","value","length","async","datos","FormData","append","url","respuesta","fetch","method","body","resultado","json","resultados","innerHTML","forEach","e","usuario","createElement","add","imagen","appendChild","nickname","textContent","botonAgregar","dataset","id","amigoId","console","log","error","agregarAmigo","mostrarResultados","busquedaUsuarios"],"mappings":"CAAA,WACA,MAAAA,EAAAC,SAAAC,eAAA,QACA,GAAAF,EAAA,CACA,MAAAG,EAAAF,SAAAC,eAAA,YACAE,EAAAH,SAAAC,eAAA,mBACAF,EAAAK,QAAA,WACAF,EAAAG,UAAAC,OAAA,YAEAH,EAAAI,iBAAA,SAAA,WACA,IAAAC,EAAAC,KAAAC,MACAF,EAAAG,OAAA,GAKAC,eAAAJ,GACA,MAAAK,EAAA,IAAAC,SACAD,EAAAE,OAAA,WAAAP,GACA,IACA,MAAAQ,EAAA,2CACAC,QAAAC,MAAAF,EAAA,CACAG,OAAA,OACAC,KAAAP,IAEAQ,QAAAJ,EAAAK,OACAD,GA2BA,SAAAb,GACA,MAAAe,EAAAvB,SAAAC,eAAA,wBACAsB,EAAAC,UAAA,GACAhB,EAAAiB,QAAAC,IACA,MAAAC,EAAA3B,SAAA4B,cAAA,OACAD,EAAAtB,UAAAwB,IAAA,sBAEA,MAAAC,EAAA9B,SAAA4B,cAAA,OACAE,EAAAzB,UAAAwB,IAAA,8BACAF,EAAAI,YAAAD,GAEA,MAAAE,EAAAhC,SAAA4B,cAAA,KACAI,EAAA3B,UAAAwB,IAAA,gCACAG,EAAAC,YAAAP,EAAAM,SACAL,EAAAI,YAAAC,GAEA,MAAAE,EAAAlC,SAAA4B,cAAA,UACAM,EAAA7B,UAAAwB,IAAA,+BACAK,EAAAD,YAAA,UACAC,EAAAC,QAAAC,GAAAV,EAAAU,GACAF,EAAA3B,iBAAA,QAAA,MAvCAK,eAAAyB,GACAC,QAAAC,IAAAF,GACA,MAAAxB,EAAA,IAAAC,SACAD,EAAAE,OAAA,UAAAsB,GACA,IACA,MAAArB,EAAA,wCACAC,QAAAC,MAAAF,EAAA,CACAG,OAAA,OACAC,KAAAP,IAEAQ,QAAAJ,EAAAK,OACAD,GACAiB,QAAAC,IAAAlB,GAEA,MAAAmB,KA0BAC,CAAAf,EAAAU,MAEAT,EAAAI,YAAAG,GAEAX,EAAAQ,YAAAJ,KAnDAe,CAAArB,GAEA,MAAAmB,KAjBAG,CAAAnC,OAXA","file":"bundle.js","sourcesContent":["(function (){\r\n    const lupa = document.getElementById(\"lupa\");\r\n    if (lupa){\r\n        const modal = document.getElementById(\"busqueda\");\r\n        const input = document.getElementById(\"busqueda__input\");\r\n        lupa.onclick =  function (){\r\n            modal.classList.toggle(\"mostrar\")\r\n        }\r\n        input.addEventListener(\"input\", function(){\r\n            let busqueda = this.value;\r\n            if(busqueda.length > 3 ){\r\n                busquedaUsuarios(busqueda);\r\n            }\r\n        })\r\n\r\n        async function busquedaUsuarios(busqueda) {\r\n            const datos = new FormData();\r\n            datos.append(\"busqueda\", busqueda);\r\n            try {\r\n                const url = \"http://localhost:3000/api/busquedaamigos\";\r\n                const respuesta = await fetch(url, {\r\n                    method:\"POST\",\r\n                    body:datos\r\n                });\r\n                const resultado = await respuesta.json();\r\n                if(resultado){\r\n                    mostrarResultados(resultado)\r\n                }\r\n            } catch (error){\r\n\r\n            }\r\n        }\r\n\r\n        async function agregarAmigo(amigoId){\r\n            console.log(amigoId);\r\n            const datos = new FormData();\r\n            datos.append(\"amigoId\",amigoId);\r\n            try {\r\n                const url = \"http://localhost:3000/api/agregaAmigo\";\r\n                const respuesta = await fetch(url, {\r\n                    method: \"POST\",\r\n                    body: datos\r\n                });\r\n                const resultado = await respuesta.json();\r\n                if(resultado){\r\n                    console.log(resultado);\r\n                }\r\n            } catch (error){\r\n\r\n            }\r\n        }\r\n\r\n        function mostrarResultados(busqueda){\r\n            const resultados = document.getElementById(\"busqueda__resultados\");\r\n            resultados.innerHTML = \"\"\r\n            busqueda.forEach(e => {\r\n                const usuario = document.createElement(\"DIV\");\r\n                usuario.classList.add(\"busqueda-resultado\")\r\n\r\n                const imagen = document.createElement(\"DIV\");\r\n                imagen.classList.add(\"busqueda-resultado__imagen\");\r\n                usuario.appendChild(imagen);\r\n\r\n                const nickname = document.createElement(\"P\")\r\n                nickname.classList.add(\"busqueda-resultado__nickname\");\r\n                nickname.textContent = e.nickname;\r\n                usuario.appendChild(nickname);\r\n\r\n                const botonAgregar = document.createElement(\"BUTTON\");\r\n                botonAgregar.classList.add(\"busqueda-resultado__agregar\");\r\n                botonAgregar.textContent = \"Agregar\";\r\n                botonAgregar.dataset.id = e.id;\r\n                botonAgregar.addEventListener(\"click\", ()=> {\r\n                    agregarAmigo(e.id)\r\n                });\r\n                usuario.appendChild(botonAgregar);\r\n\r\n                resultados.appendChild(usuario)\r\n            });\r\n        }\r\n    }\r\n})();"]}