{"version":3,"sources":["modalAmigos.js","modalNotificacion.js","modalPublicacion.js","mostrarAmigos.js","publicaciones.js"],"names":["lupa","document","getElementById","modal","input","estadoBoton","relacion","usuarioAmigoId","usuarioId","estado","botonAgregar","querySelector","textContent","disabled","onclick","modalAbierto","classList","add","remove","addEventListener","busqueda","this","value","length","async","datos","FormData","append","url","respuesta","fetch","method","body","resultado","json","resultados","innerHTML","forEach","e","usuario","createElement","imagen","appendChild","nickname","dataset","id","amigoId","console","log","error","agregarAmigo","mostrarResultados","busquedaUsuarios","campana","notificaciones","texto","notificacion","usuario_id","agregar","mostrarNotificaciones","busquedaNotificaciones","publicarInput","publicacion","publicacionImagen","publicacionTexto","files","divAmigos","idSesion","amigos","div","divImagen","busquedaNombre","mostrarAmigos","map","buscarAmigos","publicacionesDiv","divPerfil","imagenPerfil","mensaje","setAttribute","buscarPublicacicones"],"mappings":"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","file":"bundle.js","sourcesContent":["(function (){\r\n    const lupa = document.getElementById(\"lupa\"); // lupa para hacer las busquedas\r\n    if (lupa){\r\n        const modal = document.getElementById(\"busqueda\"); // ventana modal para las busquedas\r\n        const input = document.getElementById(\"busqueda__input\"); // input de las busquedas\r\n        lupa.onclick =  function (){\r\n            const modalAbierto = document.querySelector(\".mostrar\");\r\n            if(modalAbierto){\r\n                modal.classList.add(\"mostrar\")\r\n                modalAbierto.classList.remove(\"mostrar\")\r\n                return\r\n            } \r\n            modal.classList.add(\"mostrar\")\r\n        }\r\n        input.addEventListener(\"input\", function(){\r\n            let busqueda = this.value;\r\n            if(busqueda.length > 3 ){ // a partir de 3 caracteres hara la busqueda\r\n                busquedaUsuarios(busqueda);\r\n            }\r\n        })\r\n\r\n        async function busquedaUsuarios(busqueda) { // funcion que busca en base a lo puesto en el input\r\n            const datos = new FormData();\r\n            datos.append(\"busqueda\", busqueda);\r\n            try {\r\n                const url = \"http://localhost:3000/api/busquedausuarios\";\r\n                const respuesta = await fetch(url, {\r\n                    method:\"POST\",\r\n                    body:datos\r\n                });\r\n                const resultado = await respuesta.json();\r\n                if(resultado){\r\n                    mostrarResultados(resultado) // mostrar los resultados en pantalla\r\n                }\r\n            } catch (error){\r\n\r\n            }\r\n        }\r\n\r\n        async function agregarAmigo(amigoId){\r\n            \r\n            const datos = new FormData();\r\n            datos.append(\"amigoId\",amigoId);\r\n            \r\n            try {\r\n                const url = \"http://localhost:3000/api/agregaamigo\"; // esta api agrega al usuario cambiando la relacion de amistad a 1 (amigos)\r\n                const respuesta = await fetch(url, {\r\n                    method: \"POST\",\r\n                    body: datos\r\n                });\r\n                const resultado = await respuesta.json();\r\n                if(resultado){\r\n                    estadoBoton(resultado)\r\n                    \r\n                }\r\n            } catch (error){\r\n\r\n            }\r\n        }\r\n\r\n        async function relacion(amigoId){ // api para buscar alguna relacion entre el resultado y el usuarios, si ya son amigos, o si tiene su solicitud pendente\r\n            \r\n            const datos = new FormData();\r\n            datos.append(\"amigoId\",amigoId);\r\n            \r\n            try {\r\n                const url = \"http://localhost:3000/api/estadorelacion\";\r\n                const respuesta = await fetch(url, {\r\n                    method: \"POST\",\r\n                    body: datos\r\n                });\r\n                const resultado = await respuesta.json();\r\n                if(resultado){\r\n                    console.log(resultado);\r\n                    estadoBoton(resultado);\r\n                    \r\n                }\r\n            } catch (error){\r\n\r\n            }\r\n        }\r\n\r\n\r\n\r\n        function estadoBoton(relacion){ // dependiendo de si son amigos o no cambiara el boton de agregar para que en caso de que sean amigos no se puedan agregar o no se puedan enviar multiples solicitudos de amistad\r\n            \r\n            const {usuarioAmigoId,usuarioId, estado} = relacion\r\n            let botonAgregar = document.querySelector(`[data-id=\"${usuarioAmigoId}\"]`); // busca el boton por el id del amigo\r\n            if(!botonAgregar){\r\n                botonAgregar = document.querySelector(`[data-id=\"${usuarioId}\"]`); // en caso de que quien haya enviado la solicitud fue el usuario logeado, lo busca con el id del usuario\r\n            }\r\n\r\n            if(estado==0){\r\n                botonAgregar.textContent = \"Pendiente\"\r\n                botonAgregar.disabled = true;\r\n            }\r\n            if(estado==1){\r\n                botonAgregar.textContent = \"Agregado\"\r\n                botonAgregar.disabled = true;\r\n            }\r\n        }\r\n\r\n        function mostrarResultados(busqueda){\r\n            const resultados = document.getElementById(\"busqueda__resultados\");\r\n            resultados.innerHTML = \"\"\r\n            busqueda.forEach(e => {\r\n                const usuario = document.createElement(\"DIV\");\r\n                usuario.classList.add(\"busqueda-resultado\")\r\n\r\n                const imagen = document.createElement(\"DIV\");\r\n                imagen.classList.add(\"busqueda-resultado__imagen\");\r\n                usuario.appendChild(imagen);\r\n\r\n                const nickname = document.createElement(\"P\")\r\n                nickname.classList.add(\"busqueda-resultado__nickname\");\r\n                nickname.textContent = e.nickname;\r\n                usuario.appendChild(nickname);\r\n\r\n                const botonAgregar = document.createElement(\"BUTTON\");\r\n                botonAgregar.classList.add(\"busqueda-resultado__agregar\");\r\n                botonAgregar.textContent = \"Agregar\";\r\n                botonAgregar.dataset.id = e.id;\r\n                relacion(e.id); // como debemos de saber si son amigos o no o incluso se ya se han enviado solicitud, ocupamos buscar su relacion\r\n                botonAgregar.addEventListener(\"click\", ()=> {\r\n                    agregarAmigo(e.id)\r\n                });\r\n                usuario.appendChild(botonAgregar);\r\n\r\n                resultados.appendChild(usuario)\r\n            });\r\n        }\r\n    }\r\n})();","(function (){\r\n    const campana = document.getElementById(\"campana\");\r\n    if (campana){\r\n        \r\n        const notificaciones = document.getElementById(\"notificaciones\");\r\n        campana.onclick =  function (){\r\n            const modalAbierto = document.querySelector(\".mostrar\");\r\n            if(modalAbierto){\r\n                notificaciones.classList.add(\"mostrar\")\r\n                modalAbierto.classList.remove(\"mostrar\")\r\n                return\r\n            } \r\n            notificaciones.classList.add(\"mostrar\")\r\n            busquedaNotificaciones();\r\n        }\r\n\r\n        // buscar por solicitudes de amistad \r\n        async function busquedaNotificaciones() {\r\n            try {\r\n                const url = \"http://localhost:3000/api/notificaciones\";\r\n                const respuesta = await fetch(url, {\r\n                    method:\"POST\"\r\n                });\r\n                const resultado = await respuesta.json();\r\n                if(resultado){\r\n                    console.log(resultado);\r\n                    mostrarNotificaciones(resultado);\r\n                }\r\n            } catch (error){\r\n\r\n            }\r\n        }\r\n\r\n        \r\n\r\n        async function agregar(id) {\r\n            const botonAgregar = document.querySelector(`[data-id=\"${id}\"]`);\r\n            try { \r\n                const url = \"http://localhost:3000/api/agregar\"; \r\n                const datos = new FormData();\r\n                datos.append(\"id\",id ); // id de la persona a la que queremos agregar\r\n                const respuesta = await fetch(url, {\r\n                    method:\"POST\",\r\n                    body: datos\r\n                });\r\n                const resultado = await respuesta.json();\r\n                if(resultado){\r\n                    console.log(resultado); \r\n                    botonAgregar.textContent = \"Agregado\"\r\n                }\r\n            } catch (error){\r\n\r\n            }\r\n        }\r\n\r\n        function mostrarNotificaciones(resultados){\r\n            console.log(resultados)\r\n            notificaciones.innerHTML = \"\"\r\n            if (resultados.length == 0){\r\n                const texto = document.createElement(\"P\");\r\n                texto.textContent = \"No Tienes Solicitudes de amistad\"\r\n                texto.classList.add(\"notificacion__vacio\")\r\n                notificaciones.append(texto)\r\n            }\r\n            resultados.forEach(e  => {\r\n                const notificacion = document.createElement(\"DIV\");\r\n                notificacion.classList.add(\"notificacion\")\r\n\r\n                const imagen = document.createElement(\"DIV\");\r\n                imagen.classList.add(\"notificacion__imagen\");\r\n                notificacion.appendChild(imagen);\r\n\r\n                const nickname = document.createElement(\"P\")\r\n                nickname.classList.add(\"notificacion__nickname\");\r\n                nickname.textContent = e.nickname;\r\n                nickname.dataset.usuario_id = e.usuario_id;\r\n                \r\n                notificacion.appendChild(nickname);\r\n\r\n                const botonAgregar = document.createElement(\"BUTTON\");\r\n                botonAgregar.classList.add(\"notificacion__agregar\");\r\n                botonAgregar.textContent = \"Agregar\";\r\n                botonAgregar.dataset.id = e.id;\r\n                \r\n                botonAgregar.addEventListener(\"click\", ()=> {\r\n                    agregar(e.id);\r\n                });\r\n                notificacion.appendChild(botonAgregar);\r\n                notificaciones.appendChild(notificacion)\r\n            });\r\n        }\r\n    }\r\n})();","( function (){\r\n    const publicarInput = document.querySelector(\"#publicar\"); // input que se muestra para publicar\r\n    if (publicarInput){\r\n        const publicacion = document.querySelector(\"#publicacion\"); // ventana modal para publicar una publicacion\r\n\r\n        publicarInput.onclick = () => {\r\n            const modalAbierto = document.querySelector(\".mostrar\"); // si existe un modal que ya este abierto lo seleciconamos\r\n            if(modalAbierto){ // si existe al modal del archivo le aÃ±adimos la clase de mostrar y al que ya estaba abierto le quitamos la clase de mostrar\r\n                publicacion.classList.add(\"mostrar\")\r\n                modalAbierto.classList.remove(\"mostrar\")\r\n                return\r\n            } \r\n            publicacion.classList.add(\"mostrar\") // en caso de que noeste un modal abierto, al modal del archivo le ponemos la clase de mostrar\r\n        } \r\n\r\n        const publicacionImagen = document.getElementById(\"publicacion__imagen\");\r\n        const publicacionTexto = document.getElementById(\"publicacion__texto\");\r\n        const botonPublicar = document.getElementById(\"publicacion__boton\")\r\n\r\n        botonPublicar.onclick = publicar; \r\n\r\n        async function publicar(){\r\n        const imagen = publicacionImagen.files[0]; // agarra el primer elemento que tenga el input de archivos, osea que toma el valor que le hayamos cargado\r\n        console.log(imagen);\r\n        datos = new FormData();\r\n        datos.append(\"mensaje\", publicacionTexto.value) \r\n        datos.append(\"imagen\", imagen)\r\n        try {\r\n            const url = \"http://localhost:3000/api/publicar\"; // manda los datos a la api\r\n            const respuesta = await fetch(url, {\r\n                method:\"POST\",\r\n                body: datos\r\n            });\r\n            const resultado = await respuesta.json();\r\n            if(resultado){\r\n                console.log(resultado);\r\n            }\r\n        } catch (error){\r\n\r\n        }\r\n    }\r\n        }\r\n    }\r\n)();","( function (){\r\n    const divAmigos = document.querySelector(\".amigos\")\r\n    \r\n    if(divAmigos){\r\n        \r\n        document.addEventListener(\"DOMContentLoaded\", () => {\r\n           buscarAmigos();\r\n        })\r\n            async function buscarAmigos(){\r\n        try {\r\n            const url = \"http://localhost:3000/api/busquedaAmigos\"; // busca por los amigos a traves de la api\r\n            const respuesta = await fetch(url, {\r\n                method:\"POST\"\r\n            });\r\n            const resultado = await respuesta.json();\r\n            if(resultado){\r\n                console.log(resultado);\r\n                const resultados = resultado[0] // agarra los resultados de la consulta ya que en la api nos trae un arreglo de dos resultados, los dela base de datos y el id del usuario que inicio sesion\r\n                const idSesion = resultado[1] // toma el id del usuario que inicio sesion\r\n                const filtrado = resultados.map(e => { // filtra para poner el id del amigo en el campo de usuarioAmigoId en caso de que no este ahi\r\n                    if (!(e.usuarioId == idSesion)){\r\n                        e.usuarioAmigoId = e.usuarioId \r\n                    }\r\n                    return e;\r\n                })\r\n                mostrarAmigos(filtrado); // con los datos filtrados llama a la funcion para mostrar los datos en el html           \r\n            }\r\n        } catch (error){\r\n\r\n        }\r\n    }\r\n    async function busquedaNombre(id){ // api para buscar el nombre de un usuario\r\n        const datos = new FormData();\r\n        datos.append(\"id\",id)\r\n        try {\r\n            const url = \"http://localhost:3000/api/busquedaNombreUsuario\"; // busca por el nombre del amigo por medio de su id\r\n            const respuesta = await fetch(url, {\r\n                method:\"POST\",\r\n                body: datos\r\n            });\r\n            const resultado = await respuesta.json();\r\n            if(resultado){\r\n                const nickname = document.querySelector(`[data-id=\"${id}\"]`);\r\n                nickname.textContent = resultado.nickname;\r\n            }\r\n        } catch (error){\r\n\r\n        }\r\n    }\r\n\r\n    function mostrarAmigos(amigos){ // funcion para mostrar a los amigos\r\n        if(!amigos){\r\n            return;\r\n        }\r\n        amigos.forEach(e => {\r\n            const div = document.createElement(\"DIV\")\r\n            div.classList.add(\"amigo\")\r\n\r\n            const divImagen = document.createElement(\"DIV\")\r\n            divImagen.classList.add(\"amigo__imagen\")\r\n\r\n            const nickname = document.createElement(\"P\");\r\n            nickname.classList.add(\"amigo__nombre\");\r\n            nickname.dataset.id = e.usuarioAmigoId;\r\n\r\n            div.appendChild(divImagen);\r\n            div.appendChild(nickname);\r\n\r\n            divAmigos.appendChild(div)\r\n\r\n            busquedaNombre(e.usuarioAmigoId); // busca el nombre del amigo para mostrarlo\r\n        });\r\n    }\r\n    }\r\n\r\n})();","(function (){\r\n    const publicacionesDiv = document.getElementById(\"publicaciones\");\r\n    if(publicacionesDiv){// checamos si esta el div para inyectar las publicaciones\r\n        let publicaciones = [] // arreglo de publicaciones para en caso de  de hacer una nosotros, se muestre\r\n        document.addEventListener(\"DOMContentLoaded\",function(){ // buscara por las publicaciones cuando carge toda la pagina\r\n            buscarPublicacicones() // busca por publicaciones\r\n        });\r\n        async function buscarPublicacicones(){\r\n            datos = new FormData();\r\n            try {\r\n                const url = \"http://localhost:3000/api/busquedapublicaciones\";\r\n                const respuesta = await fetch(url, {\r\n                    method:\"POST\",\r\n                    body:datos\r\n                });\r\n                const resultado = await respuesta.json();\r\n                if(resultado){\r\n                    console.log(resultado);\r\n                    mostrarResultados(resultado) // mostrar los resultados en pantalla\r\n                }\r\n            } catch (error){\r\n\r\n            }\r\n            function mostrarResultados(resultados){\r\n                if(!resultados){\r\n                    \r\n                }\r\n                resultados.forEach(e => {\r\n                    const publicacion = document.createElement(\"DIV\");\r\n                    publicacion.classList.add(\"post\");\r\n\r\n                    const divPerfil = document.createElement(\"DIV\");\r\n                    divPerfil.classList.add(\"post__perfil\");\r\n\r\n                    const imagenPerfil = document.createElement(\"DIV\");\r\n                    imagenPerfil.classList.add(\"post__imagen-perfil\");\r\n                    divPerfil.appendChild(imagenPerfil);\r\n\r\n                    const nickname = document.createElement(\"P\");\r\n                    nickname.textContent = e.nickname;\r\n                    nickname.classList.add(\"post__nickname\");\r\n                    divPerfil.appendChild(nickname);\r\n                    publicacion.appendChild(divPerfil)\r\n\r\n                    const mensaje = document.createElement(\"P\");\r\n                    mensaje.textContent = e.mensaje;\r\n                    mensaje.classList.add(\"post__texto\");\r\n                    publicacion.appendChild(mensaje);\r\n\r\n                    if(e.imagen){\r\n                        const imagen = document.createElement(\"IMG\");\r\n                        imagen.setAttribute(\"src\", \"/imagenes-publicaciones/\" + e.imagen );\r\n                        imagen.classList.add(\"post__imagen\");\r\n                        publicacion.appendChild(imagen);\r\n                    }\r\n\r\n\r\n\r\n\r\n                    publicacionesDiv.appendChild(publicacion);\r\n                });\r\n            }\r\n        }\r\n    }\r\n})();"]}