{"version":3,"sources":["modalAmigos.js","modalNotificacion.js"],"names":["lupa","document","getElementById","modal","input","estadoBoton","relacion","usuarioAmigoId","estado","botonAgregar","querySelector","textContent","disabled","onclick","classList","toggle","addEventListener","busqueda","this","value","length","async","datos","FormData","append","url","respuesta","fetch","method","body","resultado","json","resultados","innerHTML","forEach","e","usuario","createElement","add","imagen","appendChild","nickname","dataset","id","amigoId","console","log","error","agregarAmigo","mostrarResultados","busquedaUsuarios","campana","notificaciones","texto","notificacion","nick","usuarioId","agregar","mostrarNotificaciones","buscarNombre","busquedaNotificaciones"],"mappings":"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","file":"bundle.js","sourcesContent":["(function (){\r\n    const lupa = document.getElementById(\"lupa\");\r\n    if (lupa){\r\n        const modal = document.getElementById(\"busqueda\");\r\n        const input = document.getElementById(\"busqueda__input\");\r\n        lupa.onclick =  function (){\r\n            modal.classList.toggle(\"mostrar\")\r\n        }\r\n        input.addEventListener(\"input\", function(){\r\n            let busqueda = this.value;\r\n            if(busqueda.length > 3 ){\r\n                busquedaUsuarios(busqueda);\r\n            }\r\n        })\r\n\r\n        async function busquedaUsuarios(busqueda) {\r\n            const datos = new FormData();\r\n            datos.append(\"busqueda\", busqueda);\r\n            try {\r\n                const url = \"http://localhost:3000/api/busquedaamigos\";\r\n                const respuesta = await fetch(url, {\r\n                    method:\"POST\",\r\n                    body:datos\r\n                });\r\n                const resultado = await respuesta.json();\r\n                if(resultado){\r\n                    mostrarResultados(resultado)\r\n                }\r\n            } catch (error){\r\n\r\n            }\r\n        }\r\n\r\n        async function agregarAmigo(amigoId){\r\n            \r\n            const datos = new FormData();\r\n            datos.append(\"amigoId\",amigoId);\r\n            \r\n            try {\r\n                const url = \"http://localhost:3000/api/agregaamigo\";\r\n                const respuesta = await fetch(url, {\r\n                    method: \"POST\",\r\n                    body: datos\r\n                });\r\n                const resultado = await respuesta.json();\r\n                if(resultado){\r\n                    estadoBoton(resultado)\r\n                    \r\n                }\r\n            } catch (error){\r\n\r\n            }\r\n        }\r\n\r\n        async function relacion(amigoId){\r\n            \r\n            const datos = new FormData();\r\n            datos.append(\"amigoId\",amigoId);\r\n            \r\n            try {\r\n                const url = \"http://localhost:3000/api/estadorelacion\";\r\n                const respuesta = await fetch(url, {\r\n                    method: \"POST\",\r\n                    body: datos\r\n                });\r\n                const resultado = await respuesta.json();\r\n                if(resultado){\r\n                    console.log(resultado);\r\n                    estadoBoton(resultado);\r\n                    \r\n                }\r\n            } catch (error){\r\n\r\n            }\r\n        }\r\n\r\n\r\n\r\n        function estadoBoton(relacion){\r\n            const {usuarioAmigoId, estado} = relacion\r\n            const botonAgregar = document.querySelector(`[data-id=\"${usuarioAmigoId}\"]`);\r\n\r\n            if(estado==0){\r\n                botonAgregar.textContent = \"Enviado\"\r\n                botonAgregar.disabled = true;\r\n            }\r\n        }\r\n\r\n        function mostrarResultados(busqueda){\r\n            const resultados = document.getElementById(\"busqueda__resultados\");\r\n            resultados.innerHTML = \"\"\r\n            busqueda.forEach(e => {\r\n                const usuario = document.createElement(\"DIV\");\r\n                usuario.classList.add(\"busqueda-resultado\")\r\n\r\n                const imagen = document.createElement(\"DIV\");\r\n                imagen.classList.add(\"busqueda-resultado__imagen\");\r\n                usuario.appendChild(imagen);\r\n\r\n                const nickname = document.createElement(\"P\")\r\n                nickname.classList.add(\"busqueda-resultado__nickname\");\r\n                nickname.textContent = e.nickname;\r\n                usuario.appendChild(nickname);\r\n\r\n                const botonAgregar = document.createElement(\"BUTTON\");\r\n                botonAgregar.classList.add(\"busqueda-resultado__agregar\");\r\n                botonAgregar.textContent = \"Agregar\";\r\n                botonAgregar.dataset.id = e.id;\r\n                relacion(e.id);\r\n                botonAgregar.addEventListener(\"click\", ()=> {\r\n                    agregarAmigo(e.id)\r\n                    \r\n                });\r\n                usuario.appendChild(botonAgregar);\r\n\r\n                resultados.appendChild(usuario)\r\n            });\r\n        }\r\n    }\r\n})();","(function (){\r\n    const campana = document.getElementById(\"campana\");\r\n    if (campana){\r\n        \r\n        const notificaciones = document.getElementById(\"notificaciones\");\r\n        campana.onclick =  function (){\r\n            notificaciones.classList.toggle(\"mostrar\")\r\n            busquedaNotificaciones();\r\n        }\r\n\r\n        async function busquedaNotificaciones() {\r\n            try {\r\n                const url = \"http://localhost:3000/api/notificaciones\";\r\n                const respuesta = await fetch(url, {\r\n                    method:\"POST\"\r\n                });\r\n                const resultado = await respuesta.json();\r\n                if(resultado){\r\n                    console.log(resultado);\r\n                    mostrarNotificaciones(resultado);\r\n                    resultado.forEach(e => {\r\n                        buscarNombre(e.usuarioId);\r\n                    })\r\n                }\r\n            } catch (error){\r\n\r\n            }\r\n        }\r\n\r\n        \r\n        async function buscarNombre(id) {\r\n            const nickname = document.querySelector(`[data-nick=\"${id}\"]`);\r\n         \r\n            try {\r\n                const url = \"http://localhost:3000/api/buscarNombre\";\r\n                const datos = new FormData();\r\n                datos.append(\"id\",id );\r\n                const respuesta = await fetch(url, {\r\n                    method:\"POST\",\r\n                    body: datos\r\n                });\r\n                const resultado = await respuesta.json();\r\n                if(resultado){\r\n                    console.log(resultado.nickname);\r\n                    nickname.textContent = resultado.nickname;\r\n                }\r\n            } catch (error){\r\n\r\n            }\r\n        }\r\n\r\n        async function agregar(id) {\r\n            const botonAgregar = document.querySelector(`[data-id=\"${id}\"]`);\r\n            try {\r\n                const url = \"http://localhost:3000/api/agregar\";\r\n                const datos = new FormData();\r\n                datos.append(\"id\",id );\r\n                const respuesta = await fetch(url, {\r\n                    method:\"POST\",\r\n                    body: datos\r\n                });\r\n                const resultado = await respuesta.json();\r\n                if(resultado){\r\n                    console.log(resultado); \r\n                    botonAgregar.textContent = \"Agregado\"\r\n                }\r\n            } catch (error){\r\n\r\n            }\r\n        }\r\n\r\n        function mostrarNotificaciones(resultados){\r\n            console.log(resultados)\r\n            notificaciones.innerHTML = \"\"\r\n            if (resultados.length == 0){\r\n                const texto = document.createElement(\"P\");\r\n                texto.textContent = \"No Tienes Solicitudes de amistad\"\r\n                texto.classList.add(\"notificacion__vacio\")\r\n                notificaciones.append(texto)\r\n            }\r\n            resultados.forEach(e  => {\r\n                const notificacion = document.createElement(\"DIV\");\r\n                notificacion.classList.add(\"notificacion\")\r\n\r\n                const imagen = document.createElement(\"DIV\");\r\n                imagen.classList.add(\"notificacion__imagen\");\r\n                notificacion.appendChild(imagen);\r\n\r\n                const nickname = document.createElement(\"P\")\r\n                nickname.classList.add(\"notificacion__nickname\");\r\n                nickname.dataset.nick = e.usuarioId;\r\n                \r\n                notificacion.appendChild(nickname);\r\n\r\n                const botonAgregar = document.createElement(\"BUTTON\");\r\n                botonAgregar.classList.add(\"notificacion__agregar\");\r\n                botonAgregar.textContent = \"Agregar\";\r\n                botonAgregar.dataset.id = e.id;\r\n                \r\n                botonAgregar.addEventListener(\"click\", ()=> {\r\n                    agregar(e.id);\r\n                    \r\n                });\r\n                notificacion.appendChild(botonAgregar);\r\n                notificaciones.appendChild(notificacion)\r\n            });\r\n        }\r\n    }\r\n})();"]}