{"version":3,"sources":["modalAmigos.js","modalNotificacion.js","modalPublicacion.js"],"names":["lupa","document","getElementById","modal","input","estadoBoton","relacion","usuarioAmigoId","usuarioId","estado","botonAgregar","querySelector","textContent","disabled","onclick","classList","toggle","addEventListener","busqueda","this","value","length","async","datos","FormData","append","url","respuesta","fetch","method","body","resultado","json","resultados","innerHTML","forEach","e","usuario","createElement","add","imagen","appendChild","nickname","dataset","id","amigoId","console","log","error","agregarAmigo","mostrarResultados","busquedaUsuarios","campana","notificaciones","texto","notificacion","usuario_id","agregar","mostrarNotificaciones","busquedaNotificaciones","publicarInput","publiacion","publicacionImagen","publicacionTexto","files"],"mappings":"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","file":"bundle.js","sourcesContent":["(function (){\r\n    const lupa = document.getElementById(\"lupa\"); // lupa para hacer las busquedas\r\n    if (lupa){\r\n        const modal = document.getElementById(\"busqueda\"); // ventana modal para las busquedas\r\n        const input = document.getElementById(\"busqueda__input\"); // input de las busquedas\r\n        lupa.onclick =  function (){\r\n            modal.classList.toggle(\"mostrar\")\r\n        }\r\n        input.addEventListener(\"input\", function(){\r\n            let busqueda = this.value;\r\n            if(busqueda.length > 3 ){ // a partir de 3 caracteres hara la busqueda\r\n                busquedaUsuarios(busqueda);\r\n            }\r\n        })\r\n\r\n        async function busquedaUsuarios(busqueda) { // funcion que busca en base a lo puesto en el input\r\n            const datos = new FormData();\r\n            datos.append(\"busqueda\", busqueda);\r\n            try {\r\n                const url = \"http://localhost:3000/api/busquedaamigos\";\r\n                const respuesta = await fetch(url, {\r\n                    method:\"POST\",\r\n                    body:datos\r\n                });\r\n                const resultado = await respuesta.json();\r\n                if(resultado){\r\n                    mostrarResultados(resultado) // mostrar los resultados en pantalla\r\n                }\r\n            } catch (error){\r\n\r\n            }\r\n        }\r\n\r\n        async function agregarAmigo(amigoId){\r\n            \r\n            const datos = new FormData();\r\n            datos.append(\"amigoId\",amigoId);\r\n            \r\n            try {\r\n                const url = \"http://localhost:3000/api/agregaamigo\"; // esta api agrega al usuario cambiando la relacion de amistad a 1 (amigos)\r\n                const respuesta = await fetch(url, {\r\n                    method: \"POST\",\r\n                    body: datos\r\n                });\r\n                const resultado = await respuesta.json();\r\n                if(resultado){\r\n                    estadoBoton(resultado)\r\n                    \r\n                }\r\n            } catch (error){\r\n\r\n            }\r\n        }\r\n\r\n        async function relacion(amigoId){ // api para buscar alguna relacion entre el resultado y el usuarios, si ya son amigos, o si tiene su solicitud pendente\r\n            \r\n            const datos = new FormData();\r\n            datos.append(\"amigoId\",amigoId);\r\n            \r\n            try {\r\n                const url = \"http://localhost:3000/api/estadorelacion\";\r\n                const respuesta = await fetch(url, {\r\n                    method: \"POST\",\r\n                    body: datos\r\n                });\r\n                const resultado = await respuesta.json();\r\n                if(resultado){\r\n                    console.log(resultado);\r\n                    estadoBoton(resultado);\r\n                    \r\n                }\r\n            } catch (error){\r\n\r\n            }\r\n        }\r\n\r\n\r\n\r\n        function estadoBoton(relacion){ // dependiendo de si son amigos o no cambiara el boton de agregar para que en caso de que sean amigos no se puedan agregar o no se puedan enviar multiples solicitudos de amistad\r\n            \r\n            const {usuarioAmigoId,usuarioId, estado} = relacion\r\n            let botonAgregar = document.querySelector(`[data-id=\"${usuarioAmigoId}\"]`); // busca el boton por el id del amigo\r\n            if(!botonAgregar){\r\n                botonAgregar = document.querySelector(`[data-id=\"${usuarioId}\"]`); // en caso de que quien haya enviado la solicitud fue el usuario logeado, lo busca con el id del usuario\r\n            }\r\n\r\n            if(estado==0){\r\n                botonAgregar.textContent = \"Pendiente\"\r\n                botonAgregar.disabled = true;\r\n            }\r\n            if(estado==1){\r\n                botonAgregar.textContent = \"Agregado\"\r\n                botonAgregar.disabled = true;\r\n            }\r\n        }\r\n\r\n        function mostrarResultados(busqueda){\r\n            const resultados = document.getElementById(\"busqueda__resultados\");\r\n            resultados.innerHTML = \"\"\r\n            busqueda.forEach(e => {\r\n                const usuario = document.createElement(\"DIV\");\r\n                usuario.classList.add(\"busqueda-resultado\")\r\n\r\n                const imagen = document.createElement(\"DIV\");\r\n                imagen.classList.add(\"busqueda-resultado__imagen\");\r\n                usuario.appendChild(imagen);\r\n\r\n                const nickname = document.createElement(\"P\")\r\n                nickname.classList.add(\"busqueda-resultado__nickname\");\r\n                nickname.textContent = e.nickname;\r\n                usuario.appendChild(nickname);\r\n\r\n                const botonAgregar = document.createElement(\"BUTTON\");\r\n                botonAgregar.classList.add(\"busqueda-resultado__agregar\");\r\n                botonAgregar.textContent = \"Agregar\";\r\n                botonAgregar.dataset.id = e.id;\r\n                relacion(e.id); // como debemos de saber si son amigos o no o incluso se ya se han enviado solicitud, ocupamos buscar su relacion\r\n                botonAgregar.addEventListener(\"click\", ()=> {\r\n                    agregarAmigo(e.id)\r\n                });\r\n                usuario.appendChild(botonAgregar);\r\n\r\n                resultados.appendChild(usuario)\r\n            });\r\n        }\r\n    }\r\n})();","(function (){\r\n    const campana = document.getElementById(\"campana\");\r\n    if (campana){\r\n        \r\n        const notificaciones = document.getElementById(\"notificaciones\");\r\n        campana.onclick =  function (){\r\n            notificaciones.classList.toggle(\"mostrar\")\r\n            busquedaNotificaciones();\r\n        }\r\n\r\n        // buscar por solicitudes de amistad \r\n        async function busquedaNotificaciones() {\r\n            try {\r\n                const url = \"http://localhost:3000/api/notificaciones\";\r\n                const respuesta = await fetch(url, {\r\n                    method:\"POST\"\r\n                });\r\n                const resultado = await respuesta.json();\r\n                if(resultado){\r\n                    console.log(resultado);\r\n                    mostrarNotificaciones(resultado);\r\n                }\r\n            } catch (error){\r\n\r\n            }\r\n        }\r\n\r\n        \r\n\r\n        async function agregar(id) {\r\n            const botonAgregar = document.querySelector(`[data-id=\"${id}\"]`);\r\n            try { \r\n                const url = \"http://localhost:3000/api/agregar\"; \r\n                const datos = new FormData();\r\n                datos.append(\"id\",id ); // id de la persona a la que queremos agregar\r\n                const respuesta = await fetch(url, {\r\n                    method:\"POST\",\r\n                    body: datos\r\n                });\r\n                const resultado = await respuesta.json();\r\n                if(resultado){\r\n                    console.log(resultado); \r\n                    botonAgregar.textContent = \"Agregado\"\r\n                }\r\n            } catch (error){\r\n\r\n            }\r\n        }\r\n\r\n        function mostrarNotificaciones(resultados){\r\n            console.log(resultados)\r\n            notificaciones.innerHTML = \"\"\r\n            if (resultados.length == 0){\r\n                const texto = document.createElement(\"P\");\r\n                texto.textContent = \"No Tienes Solicitudes de amistad\"\r\n                texto.classList.add(\"notificacion__vacio\")\r\n                notificaciones.append(texto)\r\n            }\r\n            resultados.forEach(e  => {\r\n                const notificacion = document.createElement(\"DIV\");\r\n                notificacion.classList.add(\"notificacion\")\r\n\r\n                const imagen = document.createElement(\"DIV\");\r\n                imagen.classList.add(\"notificacion__imagen\");\r\n                notificacion.appendChild(imagen);\r\n\r\n                const nickname = document.createElement(\"P\")\r\n                nickname.classList.add(\"notificacion__nickname\");\r\n                nickname.textContent = e.nickname;\r\n                nickname.dataset.usuario_id = e.usuario_id;\r\n                \r\n                notificacion.appendChild(nickname);\r\n\r\n                const botonAgregar = document.createElement(\"BUTTON\");\r\n                botonAgregar.classList.add(\"notificacion__agregar\");\r\n                botonAgregar.textContent = \"Agregar\";\r\n                botonAgregar.dataset.id = e.id;\r\n                \r\n                botonAgregar.addEventListener(\"click\", ()=> {\r\n                    agregar(e.id);\r\n                });\r\n                notificacion.appendChild(botonAgregar);\r\n                notificaciones.appendChild(notificacion)\r\n            });\r\n        }\r\n    }\r\n})();","( function (){\r\n    const publicarInput = document.querySelector(\"#publicar\"); // input que se muestra para publicar\r\n    if (publicarInput){\r\n        const publiacion = document.querySelector(\"#publicacion\"); // ventana modal para publicar una publicacion\r\n\r\n        publicarInput.onclick = () => publiacion.classList.toggle(\"mostrar\"); // agrega o quita la clase\r\n\r\n        const publicacionImagen = document.getElementById(\"publicacion__imagen\");\r\n        const publicacionTexto = document.getElementById(\"publicacion__texto\");\r\n        const botonPublicar = document.getElementById(\"publicacion__boton\")\r\n\r\n        botonPublicar.onclick = publicar; \r\n\r\n        async function publicar(){\r\n        const imagen = publicacionImagen.files[0]; // agarra el primer elemento que tenga el input de archivos, osea que toma el valor que le hayamos cargado\r\n        console.log(imagen);\r\n        datos = new FormData();\r\n        datos.append(\"mensaje\", publicacionTexto.value) \r\n        datos.append(\"imagen\", imagen)\r\n        try {\r\n            const url = \"http://localhost:3000/api/publicar\"; // manda los datos a la api\r\n            const respuesta = await fetch(url, {\r\n                method:\"POST\",\r\n                body: datos\r\n            });\r\n            const resultado = await respuesta.json();\r\n            if(resultado){\r\n                console.log(resultado);\r\n            }\r\n        } catch (error){\r\n\r\n        }\r\n    }\r\n        }\r\n    }\r\n)();"]}